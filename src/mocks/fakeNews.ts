/**
 * Мок-данные для фейковых новостей и проверки фактов
 */

export type Verdict = "Шын" | "Сомнительно" | "Вероятный фейк";

export interface FactCheckResult {
  verdict: Verdict;
  reasons: string[];
  tips: string;
  recommended: Array<{
    id: string;
    title: string;
    type: "video" | "podcast";
  }>;
}

// Предустановленные причины для разных вердиктов
const reasonsMap: Record<Verdict, string[][]> = {
  "Шын": [
    [
      "Информация подтверждена официальными источниками",
      "Факты проверены экспертами",
      "Новость соответствует действительности"
    ],
    [
      "Данные из надежных источников",
      "Проверено факт-чекерами",
      "Информация актуальна и достоверна"
    ]
  ],
  "Сомнительно": [
    [
      "Источник информации неясен",
      "Требуется дополнительная проверка",
      "Часть информации может быть неточной"
    ],
    [
      "Информация частично подтверждена",
      "Есть противоречия в источниках",
      "Рекомендуется проверить дополнительно"
    ]
  ],
  "Вероятный фейк": [
    [
      "Информация не подтверждена источниками",
      "Обнаружены признаки манипуляции",
      "Новость распространяется в подозрительных источниках"
    ],
    [
      "Данные противоречат официальным источникам",
      "Использованы манипулятивные техники",
      "Источник не заслуживает доверия"
    ]
  ]
};

const tipsMap: Record<Verdict, string[]> = {
  "Шын": [
    "Продолжайте проверять информацию из разных источников",
    "Следите за обновлениями по этой теме"
  ],
  "Сомнительно": [
    "Проверьте информацию в нескольких независимых источниках",
    "Обратите внимание на дату публикации и автора"
  ],
  "Вероятный фейк": [
    "Не распространяйте эту информацию дальше",
    "Проверьте факты в официальных источниках",
    "Сообщите о фейке в соответствующие службы"
  ]
};

/**
 * Симулирует проверку новости
 */
export const checkNews = async (text: string): Promise<FactCheckResult> => {
  // Имитация задержки API
  await new Promise(resolve => setTimeout(resolve, 2000));

  // Случайный вердикт
  const verdicts: Verdict[] = ["Шын", "Сомнительно", "Вероятный фейк"];
  const verdict = verdicts[Math.floor(Math.random() * verdicts.length)];

  const reasonsIndex = Math.floor(Math.random() * reasonsMap[verdict].length);
  const tipsIndex = Math.floor(Math.random() * tipsMap[verdict].length);

  return {
    verdict,
    reasons: reasonsMap[verdict][reasonsIndex],
    tips: tipsMap[verdict][tipsIndex],
    recommended: getRecommendedContent(verdict)
  };
};

/**
 * Получить рекомендуемый контент в зависимости от вердикта
 */
const getRecommendedContent = (verdict: Verdict) => {
  const allContent = [
    { id: "1", title: "Как распознать фейковые новости", type: "video" as const },
    { id: "2", title: "Медиаграмотность в цифровую эпоху", type: "video" as const },
    { id: "3", title: "Проверка источников информации", type: "podcast" as const },
    { id: "4", title: "Критическое мышление онлайн", type: "video" as const }
  ];

  return allContent.slice(0, 3);
};

// Мок-новости для игры
export interface NewsCard {
  id: string;
  title: string;
  content: string;
  isFake: boolean;
  explanation: string;
}

export const gameNews: NewsCard[] = [
  {
    id: "1",
    title: "Новый закон о цифровой грамотности вступил в силу",
    content: "С 1 января 2024 года в Казахстане вступил в силу новый закон о цифровой грамотности, который обязывает всех граждан проходить ежегодное тестирование.",
    isFake: true,
    explanation: "Такого закона не существует. Это типичный пример фейковой новости с конкретной датой для убедительности."
  },
  {
    id: "2",
    title: "Эксперты рекомендуют проверять источники информации",
    content: "Специалисты по медиаграмотности советуют всегда проверять информацию минимум в трех независимых источниках перед тем, как делиться ею.",
    isFake: false,
    explanation: "Это правдивая информация, основанная на рекомендациях экспертов по медиаграмотности."
  },
  {
    id: "3",
    title: "Социальные сети будут блокировать фейковые новости автоматически",
    content: "Согласно новому постановлению, все социальные сети обязаны внедрить ИИ-системы для автоматической блокировки фейковых новостей до конца месяца.",
    isFake: true,
    explanation: "Хотя технологии развиваются, такого обязательного постановления не существует. Это манипуляция с использованием авторитета."
  },
  {
    id: "4",
    title: "Цифровая грамотность помогает защититься от дезинформации",
    content: "Исследования показывают, что люди с высоким уровнем цифровой грамотности реже распространяют фейковые новости.",
    isFake: false,
    explanation: "Это подтвержденный факт, основанный на многочисленных исследованиях в области медиаграмотности."
  },
  {
    id: "5",
    title: "Правительство запустило бесплатную программу обучения",
    content: "Министерство образования запустило бесплатную онлайн-программу по цифровой грамотности для всех желающих.",
    isFake: false,
    explanation: "Такие программы действительно существуют и доступны для граждан."
  },
  {
    id: "6",
    title: "Фейковые новости распространяются в 10 раз быстрее правдивых",
    content: "Согласно исследованию MIT, фейковые новости распространяются в социальных сетях в 10 раз быстрее, чем правдивая информация.",
    isFake: false,
    explanation: "Это реальное исследование, проведенное Массачусетским технологическим институтом."
  },
  {
    id: "7",
    title: "Новый вирус атакует только тех, кто верит фейкам",
    content: "Ученые обнаружили новый компьютерный вирус, который заражает только устройства пользователей, распространяющих фейковые новости.",
    isFake: true,
    explanation: "Это полный вымысел. Компьютерные вирусы не могут определять, какие новости распространяет пользователь."
  },
  {
    id: "8",
    title: "Проверка фактов стала обязательной для всех СМИ",
    content: "С нового года все средства массовой информации обязаны проверять каждую новость через специальную государственную систему.",
    isFake: true,
    explanation: "Хотя проверка фактов важна, такого обязательного требования не существует."
  },
  {
    id: "9",
    title: "Медиаграмотность включена в школьную программу",
    content: "С 2023 года медиаграмотность стала обязательным предметом во всех школах Казахстана.",
    isFake: false,
    explanation: "Элементы медиаграмотности действительно включены в образовательные программы."
  },
  {
    id: "10",
    title: "ИИ может определить фейк с точностью 99.9%",
    content: "Новая система искусственного интеллекта способна определить фейковую новость с точностью 99.9% за доли секунды.",
    isFake: true,
    explanation: "Хотя ИИ развивается, такой высокой точности пока не достигнуто. Это преувеличение."
  }
];

